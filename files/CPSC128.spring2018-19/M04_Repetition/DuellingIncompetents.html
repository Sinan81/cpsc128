<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
<title>
(Problem) Duelling Incompetents</title>
  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js"></script>

  <link rel="Contents" href="../index.html" />
  <link rel="Prev" href="pAllGirlFamilies.html" />
  <link rel="Next" href="pFactors.html" />
  <link rel="stylesheet" type="text/css" href="../lib/CPSC128F13.css" />
  <script type="text/javascript" src="../lib/build_nav.js"></script>
  <script type="text/javascript" src="../lib/ie_patches.js"></script>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-193420-1']);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>

<body>
  <header>
  </header>

  <nav>
  </nav>

  <section>
<h1>Duelling Incompetents</h1>
<p>Contents: </p>
<ul>
  <li><a href="DuellingIncompetents.html#TheProblem">The problem</a></li>
  <li><a href="DuellingIncompetents.html#GettingToTheSolution">Getting to the solution</a></li>
  <li><a href="DuellingIncompetents.html#BShoots">B Shoots</a></li>
  <li><a href="DuellingIncompetents.html#AShoots">A Shoots</a></li>
  <li><a href="DuellingIncompetents.html#OneDuel">One Complete Duel</a></li>
  <li><a href="DuellingIncompetents.html#ManyDuels">Many Duels</a></li>
  <li><a href="DuellingIncompetents.html#RemainingWork">Remaining Work</a></li>
</ul>
<h2 name="TheProblem">The problem</h2>
<p>Write a program to model the following peculiar duel (the names have been
changed to protect the parties involved). A and B have quarelled and are
going to settle their differences by duelling with pistols. Not only are A
and B touchy, neither is a very good shot. A hits what he shoots at on
average once every two tries. B is even worse, hitting what he shoots at once
every three tries. Being a gentleman A allows B to fire first. The duel
continues until one of them is hit.</p>
<p>Your program should determine who is most likely to win the duel, by
simulating many duels between A and B. It should output the percentage of
duels won by A and the percentage won by B.</p>
<h2 name="GettingToTheSolution">Getting to the Solution</h2>
<p>Approach: We'll write this program from the inside out. Starting from the
most specific event and working outward to a full program.</p>
<h2 name="BShoots">B Shoots</h2>
<p>The duel begins with B taking a shot at A. He can either hit or miss A.
The chances that he hits A are 1 in 3. The chances that he misses are 2 in
3.</p>
<pre>import random
 
# B shoots at A
if random.randint(0, 2) == 2:
  print "B hits A. The duel's over."
else:
  print "B misses A. The duel continues." </pre>
<h2 name="AShoots">A Shoots</h2>
<p>If B hits A then the duel ends, but if he misses the duel will continue.
The duel continues by A taking a shot at B. This code is similar to B taking
a shot at A, but the odds are different because A is a better shot. We put
the code for A's shot into the <code>else</code> branch of the
<code>if</code> above, since A only gets to shoot if B misses.</p>
<pre>import random
 
# B shoots at A
if random.randint(0, 2) == 2:
  print "B hits A. The duel's over."
else:
  print "B misses A. The duel continues." 
  if random.randint(0, 1) == 1:
    print "A hits B. The duel's over."
  else:
    print "A misses B. The duel continues."</pre>
<h2 name="OneDuel">One Complete Duel</h2>
<p>Now if A hits B the duel is over, but if A misses the duel continues with
B taking a shot. We could copy our B shooting code and add it in the second
<code>else</code> branch above, but we could have to do that a lot, since the
duel could, in principle, take an infinite number of rounds to complete. A
simpler approach is to place the code above inside a <code>while</code>
loop:</p>
<pre>import random
 
while ?:
  # B shoots at A
  if random.randint(0, 2) == 2:
    print "B hits A. The duel's over."
  else:
    print "B misses A. The duel continues." 
    if random.randint(0, 1) == 1:
      print "A hits B. The duel's over."
    else:
      print "A misses B. The duel continues."</pre>
<p>The question is what the <code>while</code> condition should be. We want
to say, "while the duel is not over, they keep shooting at each other" and
Python lets us come very close to writing this:</p>
<pre>import random
 
over = False
while not over:
  # B shoots at A
  if random.randint(0, 2) == 2:
    print "B hits A. The duel's over."
    over = True
  else:
    print "B misses A. The duel continues." 
    if random.randint(0, 1) == 1:
      print "A hits B. The duel's over."
      over = True
    else:
      print "A misses B. The duel continues."</pre>
<p>We declare a variable called <code>over</code> to hold the state of the
duel. It's value is <code>False</code> when the duel is not over, and
<code>True</code> when the duel is over. We initialize it to be
<code>False</code> (since before hey have shot at each other the duel can't
be over). We update its value to <code>True</code> when one antagonist hits
the other. The loop lets them keep taking turns shooting at each other until
one finally hits the other.</p>
<p>This code successfully models a duel: run it and see.</p>
<h2 name="ManyDuels">Many Duels</h2>
<p>We are making progress but we are not done because the original problem
wanted us to simulate many duels and display the percentage of duels won by
each antagonist. To simulate many duels we pack all the code above (except
for the <code>import</code>) into a <code>for</code> loop, and record, using
counters, the number of duels each antagonist wins.</p>
<pre>import random
 
awins = 0
bwins = 0
 
for duel in range(0, 100): # See Pythonic Details for an explanation of range.
    over = False
    while not over:
        # B shoots at A
        if random.randint( 0, 2 ) == 2:
            print "B hit A. The duel's over."
            bwins = bwins + 1
            over = True
        else:
            print "B missed A. The duel continues."
            if random.randint( 0, 1 ) == 1:
                print "A hit B. The duel's over."
                awins = awins + 1
                over = True
            else:
                print "A missed B. The duel continues."
    print 6*'-'
 
print "A won", awins, "duels."
print "B won", bwins, "duels."</pre>
<p>Note that we are careful to initialize our counters <strong>above</strong>
the <code>for</code> loop, but to reset <code>over</code> to
<code>False</code> <strong>inside</strong> the <code>for</code> loop.</p>
<h2 name="RemainingWork">Remaining Work</h2>
<p>We haven't quite met the question's requirements: </p>
<ul>
  <li>We need to display the percentage of wins by A and B (not just the
    absolute numbers of wins).</li>
  <li>We shouldn't really hardwire the number of duels to be simulated (100
    in the code above) into the program. It would be better to make it be a
    constant, and better yet to allow the user to specify that value.</li>
  <li>And of course the appearance of the program onscreen could be
  improved.</li>
</ul>
  </section>

    <footer>
  This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/">Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License</a>.

  </footer>
</body>
</html>
